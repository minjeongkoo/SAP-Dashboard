원숭이도 할 수 있다!!!  도커를 이용하여 하둡 클러스터 구성하기!!!

3단계에서는 Dockerfile을 이용하여 컨테이너의 설정을 자동화 방법을 통해 컨테이너를 만들고 실행한다.


***********************************************************************************************************************


일단 전체 컨테이너를 깔끔하게 지운다.


-----------------------------------------------------------------------------------------------------------------------
$ docker rm $(docker ps -a -q)
-----------------------------------------------------------------------------------------------------------------------


도커 파일을 생성한다.


-----------------------------------------------------------------------------------------------------------------------
Dockerfile
-----------------------------------------------------------------------------------------------------------------------
FROM centos
(...)
-----------------------------------------------------------------------------------------------------------------------


-----------------------------------------------------------------------------------------------------------------------
$ docker build --quiet -t centos:hadoop .
-----------------------------------------------------------------------------------------------------------------------
-t centos:hadoop : 이미지이름(REPOSITORY 로 표현)[:태그]
.                : Dockerfile 위치
-----------------------------------------------------------------------------------------------------------------------


실행 확인


-----------------------------------------------------------------------------------------------------------------------
$ docker run -it --rm --name master -h master centos:hadoop
-----------------------------------------------------------------------------------------------------------------------
--rm : 컨테이너 종료 후 자동삭제
-----------------------------------------------------------------------------------------------------------------------


컨테이너 내부로 전달할 설정 파일은 Dockerfile 위치에 같이 둔다.


-----------------------------------------------------------------------------------------------------------------------
core-site.xml.template
hdfs-site.xml
mapred-site.xml
yarn-site.xml
-----------------------------------------------------------------------------------------------------------------------


java 설치 후 JAVA_HOME 설정
-----------------------------------------------------------------------------------------------------------------------
 readlink -f $(which java)
-----------------------------------------------------------------------------------------------------------------------
